import{r as p,j as s,L as u,I as x,B as w,u as f,a as g,C as j,b as E,c as N,A as S,d as b,e as v,i as y,f as L,l as C,R as A}from"./index--0m_tC-m.js";import{u as I,a as P}from"./zod-bCZscx_o.js";import{u as O}from"./useScrollToError-Bu1xI5-g.js";import{V as i,a as l}from"./validation.constants-C18ePHzl.js";import{o as T,s as h}from"./schemas-D8ebsZBL.js";import{E as D}from"./eye-off-NdM8Wz_w.js";import{E as F}from"./eye-D0S3lj5B.js";const _=T({email:h().min(1,i.required("Email")).email(i.invalidEmail).max(l.email.max,i.maxLength("Email",l.email.max)).transform(n=>n.toLowerCase()),password:h().min(1,i.required("Password")).min(l.password.min,i.minLength("Password",l.password.min)).max(l.password.max,i.maxLength("Password",l.password.max))}),M={email:"",password:""};function R({onSubmit:n,isLoading:a}){const[r,o]=p.useState(!1),{register:d,handleSubmit:c,formState:{errors:t}}=I({resolver:P(_),defaultValues:M});return O(t),s.jsxs("form",{onSubmit:c(n),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"email",children:"Email"}),s.jsx(x,{id:"email",type:"email",placeholder:"name@company.com",...d("email",{required:!0,onChange:m=>{m.target.value=m.target.value.toLowerCase()}}),disabled:a}),t.email&&s.jsx("p",{className:"text-sm text-destructive",children:t.email.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(u,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(x,{id:"password",type:r?"text":"password",placeholder:"Enter your password",...d("password"),disabled:a,className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>o(!r),disabled:a,className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":r?"Hide password":"Show password",children:r?s.jsx(D,{className:"h-4 w-4"}):s.jsx(F,{className:"h-4 w-4"})})]}),t.password&&s.jsx("p",{className:"text-sm text-destructive",children:t.password.message})]}),s.jsx(w,{type:"submit",className:"w-full",disabled:a,children:a?"Signing in...":"Sign In"})]})}function W(){const[n,a]=p.useState(!1),[r,o]=p.useState(null),d=f(),c=g(),t=async m=>{a(!0),o(null);try{await y.clearAuthData();const e=await L.login({email:m.email,password:m.password});d(C(e)),c(A.COMPANY_SELECTION.path,{replace:!0})}catch(e){e&&typeof e=="object"&&"message"in e&&"status"in e||e instanceof Error?o(e.message):o("Login failed")}finally{a(!1)}};return s.jsxs(j,{className:"w-full max-w-md",children:[s.jsxs(E,{className:"space-y-1 text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("img",{src:"/JivoWellnessLogo.png",alt:"Jivo Wellness Logo",className:"h-16 w-auto dark:invert"})}),s.jsx(N,{className:"text-2xl font-bold",children:S}),s.jsx(b,{children:"Enter your credentials to access the system"})]}),s.jsxs(v,{children:[r&&s.jsx("div",{className:"mb-4 p-3 text-sm text-destructive bg-destructive/10 rounded-md",children:r}),s.jsx(R,{onSubmit:t,isLoading:n})]})]})}export{W as default};
