import{u as i,a as o}from"./useMutation-CvzAhSVt.js";import{H as s,J as r,K as c}from"./index-CNJik9Bh.js";const u={async getPendingEntries(){return(await s.get(r.GRPO.PENDING)).data},async getPreview(e){return(await s.get(r.GRPO.PREVIEW(e))).data},async post(e){return(await s.post(r.GRPO.POST,e)).data},async getHistory(e){const t=e?{vehicle_entry_id:e}:void 0;return(await s.get(r.GRPO.HISTORY,{params:t})).data},async getDetail(e){return(await s.get(r.GRPO.DETAIL(e))).data},async getWarehouses(){return(await s.get(r.PO.WAREHOUSES)).data},async getAttachments(e){return(await s.get(r.GRPO.ATTACHMENTS(e))).data},async uploadAttachment(e,t){const n=new FormData;return n.append("file",t),(await s.post(r.GRPO.ATTACHMENTS(e),n,{headers:{"Content-Type":"multipart/form-data"}})).data},async deleteAttachment(e,t){await s.delete(r.GRPO.ATTACHMENT_DELETE(e,t))},async retryAttachment(e,t){return(await s.post(r.GRPO.ATTACHMENT_RETRY(e,t))).data}},a={all:["grpo"],pending:()=>[...a.all,"pending"],preview:e=>[...a.all,"preview",e],history:e=>[...a.all,"history",e],detail:e=>[...a.all,"detail",e],warehouses:()=>["warehouses"],attachments:e=>[...a.all,"attachments",e]};function d(){return i({queryKey:a.pending(),queryFn:()=>u.getPendingEntries(),staleTime:30*1e3,refetchInterval:60*1e3})}function P(e){return i({queryKey:a.preview(e),queryFn:()=>u.getPreview(e),enabled:!!e})}function m(){const e=c();return o({mutationFn:t=>u.post(t),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:a.pending()}),e.invalidateQueries({queryKey:a.preview(n.vehicle_entry_id)}),e.invalidateQueries({queryKey:a.history()})}})}function h(e){return i({queryKey:a.history(e),queryFn:()=>u.getHistory(e)})}function R(e){return i({queryKey:a.detail(e),queryFn:()=>u.getDetail(e),enabled:!!e})}function q(e=!0){return i({queryKey:a.warehouses(),queryFn:()=>u.getWarehouses(),enabled:e,staleTime:300*1e3})}function O(e){const t=c();return o({mutationFn:n=>u.uploadAttachment(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:a.attachments(e)}),t.invalidateQueries({queryKey:a.detail(e)})}})}function A(e){const t=c();return o({mutationFn:n=>u.deleteAttachment(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:a.attachments(e)}),t.invalidateQueries({queryKey:a.detail(e)})}})}function w(e){const t=c();return o({mutationFn:n=>u.retryAttachment(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:a.attachments(e)}),t.invalidateQueries({queryKey:a.detail(e)})}})}export{h as a,q as b,P as c,m as d,O as e,A as f,w as g,R as h,d as u};
