import{a as c,j as e,B as n,_ as x}from"./index-BiqUYfMP.js";import{u as h}from"./grpo.queries-BbRD836b.js";import{A as u}from"./arrow-left-BQF7jrqo.js";import{R as o,S as g}from"./shield-x-CiXL6kXJ.js";import{C as f}from"./circle-alert-DZMhDntM.js";import"./useMutation-26qx2_Go.js";const p=t=>{if(!t)return"-";try{return new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return t}};function k(){const t=c(),{data:r=[],isLoading:a,refetch:l,error:i}=h(),d=i,m=d?.status===403;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(n,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>t("/grpo"),children:e.jsx(u,{className:"h-4 w-4"})}),e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Pending Entries"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Gate entries with POs pending GRPO posting to SAP"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>l(),className:"w-full sm:w-auto",children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),m&&e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border border-destructive/50 bg-destructive/5",children:[e.jsx(g,{className:"h-5 w-5 text-destructive flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-destructive",children:"Permission Denied"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:d?.message||"You do not have permission to view pending entries."})]}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l(),children:e.jsx(o,{className:"h-4 w-4"})})]}),i&&!m&&e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border border-yellow-500/50 bg-yellow-50 dark:bg-yellow-900/10",children:[e.jsx(f,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-400",children:"Failed to Load"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:d?.message||"An error occurred while loading pending entries."})]}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l(),children:e.jsx(o,{className:"h-4 w-4"})})]}),a&&e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}),!a&&!i&&r.length===0&&e.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border rounded-lg",children:"No pending entries. All gate entries have been posted."}),!a&&!i&&r.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-sm font-medium text-muted-foreground",children:["Pending (",r.length,")"]})}),e.jsx("div",{className:"space-y-2",children:r.map(s=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-md border bg-card hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>t(`/grpo/preview/${s.vehicle_entry_id}`),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("span",{className:"font-medium text-sm",children:s.entry_no}),e.jsxs("span",{className:"inline-flex items-center rounded-full px-1.5 py-0.5 text-[10px] font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",children:[s.pending_po_count,"/",s.total_po_count," POs"]}),e.jsx("span",{className:"text-xs text-muted-foreground hidden md:inline",children:s.status})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:p(s.entry_time)}),e.jsx(x,{className:"h-4 w-4 text-muted-foreground"})]})]},s.vehicle_entry_id))})]})]})}export{k as default};
