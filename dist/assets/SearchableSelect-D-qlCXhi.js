import{y as ae,r as n,j as s,L as Q,$ as oe,a0 as le,a1 as ie,I as ue,M as b,O as W,N as de,B as fe,k as he}from"./index-CNJik9Bh.js";import{P as xe}from"./plus-BJzDLdE5.js";const me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pe=ae("circle-question-mark",me);function je(t,r){const[f,h]=n.useState(t);return n.useEffect(()=>{const p=setTimeout(()=>{h(t)},r);return()=>{clearTimeout(p)}},[t,r]),f}function ge({value:t,items:r,isLoading:f,isError:h=!1,placeholder:p="Select...",disabled:j=!1,error:N,label:v,required:y=!1,inputId:g,inputClassName:$,defaultDisplayText:a,getItemKey:d,getItemLabel:o,renderItem:R,filterFn:q,renderPopoverContent:E,loadingText:G,emptyText:H,notFoundText:J,addNewLabel:F,errorText:U="Failed to load. Please try again.",onItemSelect:X,onClear:Y,onOpenChange:P,onSelectedKeyChange:O,renderCreateDialog:M}){const[x,Z]=n.useState(!1),[K,V]=n.useState(!1),[k,i]=n.useState(a||""),[z,T]=n.useState(null),w=n.useRef(null),L=n.useRef(null),C=n.useRef(t),B=n.useRef(a),I=je(k,100),ee=n.useCallback((e,c)=>o(e).toLowerCase().includes(c.toLowerCase()),[o]),se=q||ee,m=r.filter(e=>se(e,I)),l=n.useCallback(e=>{Z(e),P?.(e)},[P]),u=n.useCallback(e=>{T(e),O?.(e)},[O]);n.useEffect(()=>{a!==B.current&&(B.current=a,a&&i(a))},[a]);const _=n.useCallback(()=>{if(j&&t){if(r.length>0){const e=r.find(c=>o(c)===t||String(d(c))===t);if(e){i(o(e));return}}i(a||t);return}if(t&&r.length>0){const e=r.find(c=>o(c)===t||String(d(c))===t);e&&(u(d(e)),i(o(e)))}else t!==C.current&&!t&&(C.current=t,u(null),i(""))},[t,r,j,a,o,d,u]);n.useEffect(()=>{_(),C.current=t},[_,t]),n.useEffect(()=>{const e=c=>{w.current&&!w.current.contains(c.target)&&l(!1)};if(x)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[x,l]);const A=e=>{u(d(e)),i(o(e)),X(e),l(!1)},te=e=>{i(e.target.value),l(!0),e.target.value||(Y(),u(null))},ne=e=>{e.key==="Escape"?l(!1):e.key==="Enter"&&m.length===1&&A(m[0])},ce=e=>{e.stopPropagation(),l(!1),V(!0)},re=n.useCallback((e,c)=>{u(e),i(c),l(!1)},[u,l]),D=F&&M;return s.jsxs("div",{className:"space-y-2",children:[v&&(E?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs(Q,{htmlFor:g,children:[v," ",y&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(oe,{children:[s.jsx(le,{asChild:!0,children:s.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full text-muted-foreground hover:text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:e=>e.stopPropagation(),children:s.jsx(pe,{className:"h-4 w-4"})})}),s.jsx(ie,{className:"w-80",align:"start",children:E(z)})]})]}):s.jsxs(Q,{htmlFor:g,children:[v," ",y&&s.jsx("span",{className:"text-destructive",children:"*"})]})),s.jsxs("div",{ref:w,className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ue,{ref:L,id:g,type:"text",value:k,onChange:te,onFocus:()=>l(!0),onKeyDown:ne,placeholder:p,disabled:j||f&&!h,className:b("pr-10 cursor-text",$,N&&"border-destructive focus-visible:ring-destructive"),autoComplete:"off"}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:f&&!h?s.jsx(W,{className:"h-4 w-4 animate-spin text-muted-foreground"}):s.jsx(de,{className:b("h-4 w-4 text-muted-foreground transition-transform",x&&"rotate-180")})})]}),x&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-popover border rounded-md shadow-md max-h-60 overflow-auto",children:h?s.jsx("div",{className:"p-4 text-center text-sm text-destructive",children:U}):f?s.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[s.jsx(W,{className:"h-4 w-4 animate-spin mx-auto mb-2"}),G]}):s.jsxs(s.Fragment,{children:[D&&s.jsx("div",{className:"px-3 py-2 border-b",children:s.jsxs(fe,{type:"button",variant:"ghost",size:"sm",className:"w-full justify-start text-sm",onClick:ce,children:[s.jsx(xe,{className:"h-4 w-4 mr-2"}),F]})}),m.length===0?s.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:k?J:H}):s.jsx("ul",{className:"py-1",children:m.map(e=>{const c=d(e),S=z===c;return s.jsxs("li",{className:b("px-3 py-2 cursor-pointer hover:bg-accent hover:text-accent-foreground flex items-center justify-between",S&&"bg-accent"),onClick:()=>A(e),children:[R?R(e,S):s.jsx("span",{className:"text-sm",children:o(e)}),S&&s.jsx(he,{className:"h-4 w-4 text-primary"})]},c)})})]})})]}),N&&s.jsx("p",{className:"text-sm text-destructive",children:N}),D&&M(K,V,re)]})}export{ge as S,je as u};
