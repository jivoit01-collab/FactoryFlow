import{a as g,E as v,r as i,F as w,j as e,B as b,I as y}from"./index-DcDZk0Ze.js";import{g as S}from"./status.constants-CIikCqTl.js";import{u as C}from"./vehicleEntry.queries-CX2qplUl.js";import{D}from"./DateRangePicker-Bbhmnf0x.js";import{P}from"./plus-CZjyi12_.js";import{S as L}from"./search-BuDSPJxu.js";function T({config:t}){const m=g(),[u]=v(),[l,h]=i.useState(""),{dateRange:n,dateRangeAsDateObjects:f,setDateRange:o}=w(),d=u.get("status")||void 0,p=i.useMemo(()=>({from_date:n.from,to_date:n.to,entry_type:t.entryType,status:d}),[n,d,t.entryType]),{data:c=[],isLoading:j}=C(p),x=i.useMemo(()=>{let s=c;if(l.trim()){const a=l.toLowerCase();s=s.filter(r=>r.entry_no?.toLowerCase().includes(a)||r.status?.toLowerCase().includes(a)||r.remarks?.toLowerCase().includes(a)||r.vehicle?.vehicle_number?.toLowerCase().includes(a)||r.driver?.name?.toLowerCase().includes(a))}return s},[c,l]),N=s=>{if(!s)return"-";try{return new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return s}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:t.allPageTitle}),e.jsx("p",{className:"text-muted-foreground",children:t.allPageDescription})]}),e.jsxs(b,{onClick:()=>m(`${t.routePrefix}/new`),className:"w-full sm:w-auto",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add New Entry"]})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(L,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(y,{placeholder:"Search by entry number, status, or remarks...",value:l,onChange:s=>h(s.target.value),className:"pl-10"})]}),e.jsx("div",{className:"w-full sm:w-auto",children:e.jsx(D,{date:f,onDateChange:s=>{s&&"from"in s?o(s):o(void 0)},mode:"range"})})]}),j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):x.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground rounded-md border",children:e.jsx("p",{className:"text-lg",children:"No entries present"})}):e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto max-w-full",children:e.jsxs("table",{className:"w-full min-w-[700px]",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Entry No."}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Vehicle"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Driver"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Entry Time"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Status"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Remarks"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{className:"border-t hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>{m(`${t.routePrefix}/edit/${s.id}/step1`)},children:[e.jsx("td",{className:"p-3 text-sm font-medium",children:s.entry_no||"-"}),e.jsx("td",{className:"p-3 text-sm",children:s.vehicle?.vehicle_number||"-"}),e.jsx("td",{className:"p-3 text-sm",children:s.driver?.name||"-"}),e.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:N(s.entry_time)}),e.jsx("td",{className:"p-3 text-sm",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${S(s.status||"")}`,children:s.status||"-"})}),e.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:s.remarks||"-"})]},s.id))})]})})})]})}export{T as S};
