import{r as l,u as N,a as g,g as v,h as S,j as e,C as c,b as d,c as m,d as p,e as x,k as b,B as w,i as L,s as _,R as k}from"./index-_Sfdy-kJ.js";function D(){const[a,u]=l.useState(""),[o,r]=l.useState(!1),h=N(),y=g(),f=v(),{user:i}=S(s=>s.auth),j=f.state?.from,n=i?.companies||[],C=async()=>{if(a){r(!0);try{const s=n.find(t=>t.company_id.toString()===a);if(!s){console.error("Selected company not found");return}await L.updateCurrentCompany(s),h(_(s)),y(k.LOADING_USER.path,{replace:!0,state:{from:j}})}catch(s){console.error("Failed to select company:",s)}finally{r(!1)}}};return!i||n.length===0?e.jsx(c,{className:"w-full max-w-md",children:e.jsxs(d,{children:[e.jsx(m,{children:"No Companies Available"}),e.jsx(p,{children:"You don't have access to any companies. Please contact your administrator."})]})}):e.jsxs(c,{className:"w-full max-w-md",children:[e.jsxs(d,{className:"space-y-1 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/JivoWellnessLogo.png",alt:"Jivo Wellness Logo",className:"h-16 w-auto dark:invert"})}),e.jsx(m,{className:"text-2xl font-bold",children:"Select Company"}),e.jsx(p,{children:"Choose a company to continue"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select a company"}),e.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:n.map(s=>{const t=a===s.company_id.toString();return e.jsx(c,{className:`cursor-pointer transition-all hover:border-primary ${t?"border-primary bg-primary/5":""}`,onClick:()=>u(s.company_id.toString()),children:e.jsx(x,{className:"p-4",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold",children:s.company_name}),t&&e.jsx(b,{className:"h-4 w-4 text-primary"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.role," â€¢ ",s.company_code]})]})})})},s.company_id)})})]}),e.jsx(w,{onClick:C,disabled:!a||o,className:"w-full",children:o?"Loading...":"Continue"})]})]})}export{D as default};
