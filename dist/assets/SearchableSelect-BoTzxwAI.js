import{y as ae,r as n,j as s,L as Q,$ as oe,a0 as le,a1 as ie,I as ue,M as y,O as W,N as de,B as fe,k as xe}from"./index-Df6yG8ds.js";import{P as he}from"./plus-CNXR9Mm4.js";const me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],pe=ae("circle-question-mark",me);function je(t,r){const[f,x]=n.useState(t);return n.useEffect(()=>{const p=setTimeout(()=>{x(t)},r);return()=>{clearTimeout(p)}},[t,r]),f}function ge({value:t,items:r,isLoading:f,isError:x=!1,placeholder:p="Select...",disabled:j=!1,error:N,label:v,required:b=!1,inputId:g,inputClassName:$,defaultDisplayText:i,getItemKey:d,getItemLabel:a,renderItem:R,filterFn:q,renderPopoverContent:E,loadingText:G,emptyText:H,notFoundText:J,addNewLabel:F,errorText:T="Failed to load. Please try again.",onItemSelect:U,onClear:X,onOpenChange:P,onSelectedKeyChange:O,renderCreateDialog:M}){const[h,Y]=n.useState(!1),[Z,V]=n.useState(!1),[k,l]=n.useState(i||""),[D,K]=n.useState(null),w=n.useRef(null),L=n.useRef(null),C=n.useRef(t),z=n.useRef(i),I=je(k,100),ee=n.useCallback((e,c)=>a(e).toLowerCase().includes(c.toLowerCase()),[a]),se=q||ee,m=r.filter(e=>se(e,I)),o=n.useCallback(e=>{Y(e),P?.(e)},[P]),u=n.useCallback(e=>{K(e),O?.(e)},[O]);n.useEffect(()=>{i!==z.current&&(z.current=i,i&&l(i))},[i]);const B=n.useCallback(()=>{if(j&&t){if(r.length>0){const e=r.find(c=>a(c)===t||String(d(c))===t);if(e){l(a(e));return}}l(t);return}if(t&&r.length>0){const e=r.find(c=>a(c)===t||String(d(c))===t);e&&(u(d(e)),l(a(e)))}else t!==C.current&&!t&&(C.current=t,u(null),l(""))},[t,r,j,a,d,u]);n.useEffect(()=>{B(),C.current=t},[B,t]),n.useEffect(()=>{const e=c=>{w.current&&!w.current.contains(c.target)&&o(!1)};if(h)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[h,o]);const _=e=>{u(d(e)),l(a(e)),U(e),o(!1)},te=e=>{l(e.target.value),o(!0),e.target.value||(X(),u(null))},ne=e=>{e.key==="Escape"?o(!1):e.key==="Enter"&&m.length===1&&_(m[0])},ce=e=>{e.stopPropagation(),o(!1),V(!0)},re=n.useCallback((e,c)=>{u(e),l(c),o(!1)},[u,o]),A=F&&M;return s.jsxs("div",{className:"space-y-2",children:[v&&(E?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs(Q,{htmlFor:g,children:[v," ",b&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(oe,{children:[s.jsx(le,{asChild:!0,children:s.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full text-muted-foreground hover:text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:e=>e.stopPropagation(),children:s.jsx(pe,{className:"h-4 w-4"})})}),s.jsx(ie,{className:"w-80",align:"start",children:E(D)})]})]}):s.jsxs(Q,{htmlFor:g,children:[v," ",b&&s.jsx("span",{className:"text-destructive",children:"*"})]})),s.jsxs("div",{ref:w,className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(ue,{ref:L,id:g,type:"text",value:k,onChange:te,onFocus:()=>o(!0),onKeyDown:ne,placeholder:p,disabled:j||f&&!x,className:y("pr-10 cursor-text",$,N&&"border-destructive focus-visible:ring-destructive"),autoComplete:"off"}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:f&&!x?s.jsx(W,{className:"h-4 w-4 animate-spin text-muted-foreground"}):s.jsx(de,{className:y("h-4 w-4 text-muted-foreground transition-transform",h&&"rotate-180")})})]}),h&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-popover border rounded-md shadow-md max-h-60 overflow-auto",children:x?s.jsx("div",{className:"p-4 text-center text-sm text-destructive",children:T}):f?s.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[s.jsx(W,{className:"h-4 w-4 animate-spin mx-auto mb-2"}),G]}):s.jsxs(s.Fragment,{children:[A&&s.jsx("div",{className:"px-3 py-2 border-b",children:s.jsxs(fe,{type:"button",variant:"ghost",size:"sm",className:"w-full justify-start text-sm",onClick:ce,children:[s.jsx(he,{className:"h-4 w-4 mr-2"}),F]})}),m.length===0?s.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:k?J:H}):s.jsx("ul",{className:"py-1",children:m.map(e=>{const c=d(e),S=D===c;return s.jsxs("li",{className:y("px-3 py-2 cursor-pointer hover:bg-accent hover:text-accent-foreground flex items-center justify-between",S&&"bg-accent"),onClick:()=>_(e),children:[R?R(e,S):s.jsx("span",{className:"text-sm",children:a(e)}),S&&s.jsx(xe,{className:"h-4 w-4 text-primary"})]},c)})})]})})]}),N&&s.jsx("p",{className:"text-sm text-destructive",children:N}),A&&M(Z,V,re)]})}export{ge as S,je as u};
