import{a as N,E as g,r as i,F as w,j as e,B as v,I as b}from"./index-pfdn_VZr.js";import{g as R}from"./status.constants-B8jiwjY-.js";import{E as C}from"./vehicle.constants-Cygh0PaO.js";import{u as E}from"./vehicleEntry.queries-Dt_tmjik.js";import{D as S}from"./DateRangePicker-3rSh1phR.js";import{P as _}from"./plus-dliDZe_S.js";import{S as D}from"./search-DAEKtHCH.js";import"./triangle-alert-D2PDJXcY.js";import"./circle-x-DER48uZt.js";import"./circle-check-DQttV4se.js";import"./clock-DY7OS-S1.js";import"./useMutation-DCve_oiD.js";function Y(){const m=N(),[x]=g(),[r,u]=i.useState(""),{dateRange:l,dateRangeAsDateObjects:h,setDateRange:n}=w(),o=x.get("status")||void 0,f=i.useMemo(()=>({from_date:l.from,to_date:l.to,entry_type:C.RAW_MATERIAL,status:o}),[l,o]),{data:c=[],isLoading:p}=E(f),d=i.useMemo(()=>{let s=c;if(r.trim()){const t=r.toLowerCase();s=s.filter(a=>a.entry_no?.toLowerCase().includes(t)||a.status?.toLowerCase().includes(t)||a.remarks?.toLowerCase().includes(t)||a.vehicle?.vehicle_number?.toLowerCase().includes(t)||a.driver?.name?.toLowerCase().includes(t))}return s},[c,r]),j=s=>{if(!s)return"-";try{return new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return s}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Raw Materials (RM/PM/Assets)"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage raw materials, packing materials, and assets gate entries"})]}),e.jsxs(v,{onClick:()=>m("/gate/raw-materials/new"),className:"w-full sm:w-auto",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Add New Entry"]})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(D,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(b,{placeholder:"Search by entry number, status, or remarks...",value:r,onChange:s=>u(s.target.value),className:"pl-10"})]}),e.jsx("div",{className:"w-full sm:w-auto",children:e.jsx(S,{date:h,onDateChange:s=>{s&&"from"in s?n(s):n(void 0)},mode:"range"})})]}),p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):d.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground rounded-md border",children:e.jsx("p",{className:"text-lg",children:"No entries present"})}):e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto max-w-full",children:e.jsxs("table",{className:"w-full min-w-[850px]",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Entry No."}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Vehicle"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Supplier Name / Code"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Driver"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Entry Time"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Status"}),e.jsx("th",{className:"p-3 text-left text-sm font-medium",children:"Remarks"})]})}),e.jsx("tbody",{children:d.map(s=>e.jsxs("tr",{className:"border-t hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>{m(`/gate/raw-materials/edit/${s.id}/step1`)},children:[e.jsx("td",{className:"p-3 text-sm font-medium",children:s.entry_no||"-"}),e.jsx("td",{className:"p-3 text-sm",children:s.vehicle?.vehicle_number||"-"}),e.jsx("td",{className:"p-3 text-sm",children:s.suppliers?.length>0?s.suppliers.map(t=>`${t.supplier_name} / ${t.supplier_code}`).join(", "):"-"}),e.jsx("td",{className:"p-3 text-sm",children:s.driver?.name||"-"}),e.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:j(s.entry_time)}),e.jsx("td",{className:"p-3 text-sm",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${R(s.status||"")}`,children:s.status||"-"})}),e.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:s.remarks||"-"})]},s.id))})]})})})]})}export{Y as default};
