import{u,a as c}from"./useMutation-BgZEu4WU.js";import{H as a,J as i,K as l}from"./index-C2mIzQGa.js";function o(e){if(!e)return"";const t=new URLSearchParams;e.from_date&&t.append("from_date",e.from_date),e.to_date&&t.append("to_date",e.to_date),e.workflow_status&&t.append("workflow_status",e.workflow_status),e.final_status&&t.append("final_status",e.final_status);const s=t.toString();return s?`?${s}`:""}const r={async getList(e){return(await a.get(i.QUALITY_CONTROL_V2.INSPECTIONS_LIST+o(e))).data},async getPendingList(e){return(await a.get(i.QUALITY_CONTROL_V2.PENDING_INSPECTIONS+o(e))).data},async getDraftList(e){return(await a.get(i.QUALITY_CONTROL_V2.DRAFT_INSPECTIONS+o(e))).data},async getActionableList(e){return(await a.get(i.QUALITY_CONTROL_V2.ACTIONABLE_INSPECTIONS+o(e))).data},async getCompletedList(e){return(await a.get(i.QUALITY_CONTROL_V2.COMPLETED_INSPECTIONS+o(e))).data},async getRejectedList(e){return(await a.get(i.QUALITY_CONTROL_V2.REJECTED_INSPECTIONS+o(e))).data},async getCounts(e){return(await a.get(i.QUALITY_CONTROL_V2.INSPECTION_COUNTS+o(e))).data},async getAwaitingChemist(e){return(await a.get(i.QUALITY_CONTROL_V2.AWAITING_CHEMIST+o(e))).data},async getAwaitingQAM(e){return(await a.get(i.QUALITY_CONTROL_V2.AWAITING_QAM+o(e))).data},async getById(e){return(await a.get(i.QUALITY_CONTROL_V2.INSPECTION_BY_ID(e))).data},async getForSlip(e){try{return(await a.get(i.QUALITY_CONTROL_V2.INSPECTION_FOR_SLIP(e))).data}catch(t){if(t.status===404)return null;throw t}},async create(e,t){return(await a.post(i.QUALITY_CONTROL_V2.INSPECTION_FOR_SLIP(e),t)).data},async update(e,t){return(await a.post(i.QUALITY_CONTROL_V2.INSPECTION_FOR_SLIP(e),t)).data},async updateParameters(e,t){return(await a.post(i.QUALITY_CONTROL_V2.INSPECTION_PARAMETERS(e),{results:t})).data},async submit(e){return(await a.post(i.QUALITY_CONTROL_V2.INSPECTION_SUBMIT(e))).data},async approveAsChemist(e,t){return(await a.post(i.QUALITY_CONTROL_V2.APPROVE_CHEMIST(e),t)).data},async approveAsQAM(e,t){return(await a.post(i.QUALITY_CONTROL_V2.APPROVE_QAM(e),t)).data},async reject(e,t){return(await a.post(i.QUALITY_CONTROL_V2.REJECT_INSPECTION(e),t)).data}},n={all:["inspections"],list:e=>[...n.all,"list",...e?[e]:[]],pending:e=>[...n.all,"pending",...e?[e]:[]],draft:e=>[...n.all,"draft",...e?[e]:[]],actionable:e=>[...n.all,"actionable",...e?[e]:[]],awaitingChemist:e=>[...n.all,"awaitingChemist",...e?[e]:[]],awaitingQAM:e=>[...n.all,"awaitingQAM",...e?[e]:[]],completed:e=>[...n.all,"completed",...e?[e]:[]],rejected:e=>[...n.all,"rejected",...e?[e]:[]],counts:e=>[...n.all,"counts",...e?[e]:[]],detail:e=>[...n.all,"detail",e],forSlip:e=>[...n.all,"forSlip",e]},d={all:{key:n.list,fn:r.getList},actionable:{key:n.actionable,fn:r.getActionableList},pending:{key:n.pending,fn:r.getPendingList},draft:{key:n.draft,fn:r.getDraftList},approved:{key:n.completed,fn:e=>r.getCompletedList({...e,final_status:"ACCEPTED"})},rejected:{key:n.rejected,fn:r.getRejectedList}};function I(e,t){const{key:s,fn:p}=d[e]||d.all;return u({queryKey:s(t),queryFn:()=>p(t),staleTime:30*1e3})}function T(e){return u({queryKey:n.actionable(e),queryFn:()=>r.getActionableList(e),staleTime:30*1e3})}function C(e){return u({queryKey:n.awaitingChemist(e),queryFn:()=>r.getAwaitingChemist(e),staleTime:30*1e3})}function A(e){return u({queryKey:n.awaitingQAM(e),queryFn:()=>r.getAwaitingQAM(e),staleTime:30*1e3})}function O(e){return u({queryKey:n.counts(e),queryFn:()=>r.getCounts(e),staleTime:30*1e3})}function L(e){return u({queryKey:n.forSlip(e),queryFn:()=>r.getForSlip(e),enabled:!!e})}function N(){const e=l();return c({mutationFn:({slipId:t,data:s})=>r.create(t,s),onSuccess:(t,{slipId:s})=>{e.invalidateQueries({queryKey:n.all}),e.invalidateQueries({queryKey:n.forSlip(s)})}})}function g(){const e=l();return c({mutationFn:({inspectionId:t,results:s})=>r.updateParameters(t,s),onSuccess:(t,{inspectionId:s})=>{e.invalidateQueries({queryKey:n.all}),e.invalidateQueries({queryKey:n.detail(s)})}})}function f(){const e=l();return c({mutationFn:t=>r.submit(t),onSuccess:t=>{e.invalidateQueries({queryKey:n.all}),e.invalidateQueries({queryKey:n.detail(t.id)})}})}function S(){const e=l();return c({mutationFn:({id:t,data:s})=>r.approveAsChemist(t,s),onSuccess:t=>{e.invalidateQueries({queryKey:n.all}),e.invalidateQueries({queryKey:n.detail(t.id)})}})}function Q(){const e=l();return c({mutationFn:({id:t,data:s})=>r.approveAsQAM(t,s),onSuccess:t=>{e.invalidateQueries({queryKey:n.all}),e.invalidateQueries({queryKey:n.detail(t.id)})}})}function w(){const e=l();return c({mutationFn:({id:t,data:s})=>r.reject(t,s),onSuccess:t=>{e.invalidateQueries({queryKey:n.all}),e.invalidateQueries({queryKey:n.detail(t.id)})}})}export{T as a,I as b,L as c,N as d,g as e,f,S as g,Q as h,w as i,C as j,A as k,O as u};
