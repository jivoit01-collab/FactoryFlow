import{y as ae,r as t,aj as oe,j as s,L as J,Z as le,_ as ie,$ as ue,I as de,J as y,M as K,K as fe,B as xe,k as he}from"./index-FTIaQgW5.js";import{P as me}from"./plus-Broj2zbo.js";const pe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],je=ae("circle-question-mark",pe);function Ne(n,a){const[d,f]=t.useState(n);return t.useEffect(()=>{const p=setTimeout(()=>{f(n)},a??oe.input);return()=>{clearTimeout(p)}},[n,a]),d}function Ce({value:n,items:a,isLoading:d,isError:f=!1,placeholder:p="Select...",disabled:j=!1,error:N,label:v,required:S=!1,inputId:g,inputClassName:Q,defaultDisplayText:o,getItemKey:x,getItemLabel:l,renderItem:E,filterFn:U,renderPopoverContent:R,loadingText:W,emptyText:Y,notFoundText:Z,addNewLabel:F,errorText:$="Failed to load. Please try again.",onItemSelect:q,onClear:G,onOpenChange:P,onSelectedKeyChange:O,renderCreateDialog:D}){const[h,H]=t.useState(!1),[L,M]=t.useState(!1),[C,i]=t.useState(o||""),[V,T]=t.useState(null),k=t.useRef(null),X=t.useRef(null),w=t.useRef(n),_=t.useRef(o),I=Ne(C,100),ee=t.useCallback((e,c)=>l(e).toLowerCase().includes(c.toLowerCase()),[l]),se=U||ee,m=a.filter(e=>se(e,I)),r=t.useCallback(e=>{H(e),P?.(e)},[P]),u=t.useCallback(e=>{T(e),O?.(e)},[O]);t.useEffect(()=>{o!==_.current&&(_.current=o,o&&i(o))},[o]);const B=t.useCallback(()=>{if(j&&n){i(n);return}if(n&&a.length>0){const e=a.find(c=>l(c)===n||String(x(c))===n);e&&(u(x(e)),i(l(e)))}else n!==w.current&&!n&&(w.current=n,u(null),i(""))},[n,a,j,l,x,u]);t.useEffect(()=>{B(),w.current=n},[B,n]),t.useEffect(()=>{const e=c=>{k.current&&!k.current.contains(c.target)&&r(!1)};if(h)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[h,r]);const z=e=>{u(x(e)),i(l(e)),q(e),r(!1)},te=e=>{i(e.target.value),r(!0),e.target.value||(G(),u(null))},ne=e=>{e.key==="Escape"?r(!1):e.key==="Enter"&&m.length===1&&z(m[0])},ce=e=>{e.stopPropagation(),r(!1),M(!0)},re=t.useCallback((e,c)=>{u(e),i(c),r(!1)},[u,r]),A=F&&D;return s.jsxs("div",{className:"space-y-2",children:[v&&(R?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs(J,{htmlFor:g,children:[v," ",S&&s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(le,{children:[s.jsx(ie,{asChild:!0,children:s.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full text-muted-foreground hover:text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",onClick:e=>e.stopPropagation(),children:s.jsx(je,{className:"h-4 w-4"})})}),s.jsx(ue,{className:"w-80",align:"start",children:R(V)})]})]}):s.jsxs(J,{htmlFor:g,children:[v," ",S&&s.jsx("span",{className:"text-destructive",children:"*"})]})),s.jsxs("div",{ref:k,className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(de,{ref:X,id:g,type:"text",value:C,onChange:te,onFocus:()=>r(!0),onKeyDown:ne,placeholder:p,disabled:j||d&&!f,className:y("pr-10 cursor-text",Q,N&&"border-destructive focus-visible:ring-destructive"),autoComplete:"off"}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:d&&!f?s.jsx(K,{className:"h-4 w-4 animate-spin text-muted-foreground"}):s.jsx(fe,{className:y("h-4 w-4 text-muted-foreground transition-transform",h&&"rotate-180")})})]}),h&&s.jsx("div",{className:"absolute z-50 w-full mt-1 bg-popover border rounded-md shadow-md max-h-60 overflow-auto",children:f?s.jsx("div",{className:"p-4 text-center text-sm text-destructive",children:$}):d?s.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[s.jsx(K,{className:"h-4 w-4 animate-spin mx-auto mb-2"}),W]}):s.jsxs(s.Fragment,{children:[A&&s.jsx("div",{className:"px-3 py-2 border-b",children:s.jsxs(xe,{type:"button",variant:"ghost",size:"sm",className:"w-full justify-start text-sm",onClick:ce,children:[s.jsx(me,{className:"h-4 w-4 mr-2"}),F]})}),m.length===0?s.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:C?Z:Y}):s.jsx("ul",{className:"py-1",children:m.map(e=>{const c=x(e),b=V===c;return s.jsxs("li",{className:y("px-3 py-2 cursor-pointer hover:bg-accent hover:text-accent-foreground flex items-center justify-between",b&&"bg-accent"),onClick:()=>z(e),children:[E?E(e,b):s.jsx("span",{className:"text-sm",children:l(e)}),b&&s.jsx(he,{className:"h-4 w-4 text-primary"})]},c)})})]})})]}),N&&s.jsx("p",{className:"text-sm text-destructive",children:N}),A&&D(L,M,re)]})}export{je as C,Ce as S,Ne as u};
