import{H as f,J as N,K as P,a as oe,r as x,j as t,k as H,C as z,b as ue,c as _e,e as W,L as p,I as h,M as g,P as G,B as k,X as J}from"./index-DfliZ1OU.js";import{A as pe}from"./status.constants-q2VkBYr0.js";import{b as me}from"./validation.constants-C18ePHzl.js";import{i as ye,a as he,g as xe,b as X}from"./error-qMYEww3Q.js";import{u as be}from"./useScrollToError-n191AQtQ.js";import{a as te}from"./useMutation-BW1s3MWF.js";import{u as ge}from"./poReceipt.queries-CF5lTBds.js";import{a as ve}from"./vehicleEntry.queries-BEHxWCSE.js";import{F as Z}from"./FillDataAlert-BotaVs4-.js";import{S as fe}from"./StepFooter-Dsx4NhZD.js";import{S as Ne}from"./StepHeader-CErtjsYJ.js";import{S as je}from"./StepLoadingSpinner-JOuIKZHW.js";import"./driver.schema-DZt_XaHY.js";import"./vehicle.schema-BmxwMEOL.js";import{W as Se}from"./wizard.constants-DfnuBX7K.js";import{u as Ae}from"./useEntryId-gLpAato9.js";import{F as Ce}from"./file-text-Dt6VIQgo.js";import{P as I,U as ee}from"./upload-B5DX4_43.js";import{C as $e}from"./circle-alert-BrmK50Th.js";import"./triangle-alert-SXDGnHc7.js";import"./circle-x-BWFndibb.js";import"./circle-check-BJLvV6uA.js";import"./clock-T0iSBFYK.js";import"./arrow-left-C_yHQVur.js";import"./schemas-D8ebsZBL.js";const L={async get(c){try{return(await f.get(N.QUALITY_CONTROL_V2.ARRIVAL_SLIP_GET(c))).data}catch(o){if(o.status===404)return null;throw o}},async getById(c){return(await f.get(N.QUALITY_CONTROL_V2.ARRIVAL_SLIP_BY_ID(c))).data},async create(c,o){return(await f.post(N.QUALITY_CONTROL_V2.ARRIVAL_SLIP_CREATE(c),o)).data},async update(c,o){return(await f.post(N.QUALITY_CONTROL_V2.ARRIVAL_SLIP_CREATE(c),o)).data},async submit(c){const{slipId:o,certificateOfAnalysis:u,certificateOfQuantity:j}=c,v=new FormData;return u&&v.append("certificate_of_analysis",u),j&&v.append("certificate_of_quantity",j),(await f.post(N.QUALITY_CONTROL_V2.ARRIVAL_SLIP_SUBMIT(o),v,{headers:{"Content-Type":"multipart/form-data"}})).data},async list(c){return(await f.get(N.QUALITY_CONTROL_V2.ARRIVAL_SLIP_LIST,{params:c})).data}};function Fe(){const c=P();return te({mutationFn:({poItemReceiptId:o,data:u})=>L.create(o,u),onSuccess:(o,{poItemReceiptId:u})=>{c.invalidateQueries({queryKey:["arrivalSlip",u]}),c.invalidateQueries({queryKey:["arrivalSlips"]}),c.invalidateQueries({queryKey:["gateEntryFullView"]})}})}function Oe(){const c=P();return te({mutationFn:o=>L.submit(o),onSuccess:()=>{c.invalidateQueries({queryKey:["arrivalSlip"]}),c.invalidateQueries({queryKey:["arrivalSlips"]}),c.invalidateQueries({queryKey:["gateEntryFullView"]}),c.invalidateQueries({queryKey:["pendingInspections"]})}})}function tt(){const c=oe(),o=P(),{entryId:u,entryIdNumber:j,isEditMode:v}=Ae(),Q=Se.STEPS.ARRIVAL_SLIP,{data:O=[],isLoading:T,error:S}=ge(j||null),{data:E,isLoading:ie}=ve(j||null),V=Fe(),M=Oe(),[y,w]=x.useState([]),[n,b]=x.useState({});be(n);const[ae,se]=x.useState(!1),[D,re]=x.useState(!1),[U,B]=x.useState(!1),A=v&&!D;x.useEffect(()=>{if(O.length>0&&E){const e=new Date().toISOString().slice(0,16),a=[];for(const i of O)for(const s of i.items)s.id&&a.push({id:s.id,po_item_code:s.po_item_code,item_name:s.item_name,ordered_qty:s.ordered_qty,received_qty:s.received_qty,uom:s.uom,supplier_name:i.supplier_name,po_number:i.po_number,existingSlip:null,isSubmitted:!1,slipId:null,certificateOfAnalysisFile:null,certificateOfQuantityFile:null,formData:{particulars:`${s.item_name}`,arrival_datetime:e,party_name:i.supplier_name,billing_qty:s.received_qty.toString(),billing_uom:s.uom,truck_no_as_per_bill:E.vehicle?.vehicle_number||"",commercial_invoice_no:"",eway_bill_no:"",bilty_no:"",has_certificate_of_analysis:!1,has_certificate_of_quantity:!1,remarks:""}});w(a)}},[O,E]),x.useEffect(()=>{(async()=>{if(y.length===0||!A)return;const a=[...y];let i=!1;for(let s=0;s<a.length;s++){const d=a[s];if(!d.existingSlip)try{const l=await L.get(d.id);l&&(a[s]={...d,existingSlip:l,isSubmitted:l.status===pe.SUBMITTED,slipId:l.id,formData:{particulars:l.particulars,arrival_datetime:l.arrival_datetime?.slice(0,16)||"",party_name:l.party_name,billing_qty:l.billing_qty,billing_uom:l.billing_uom,truck_no_as_per_bill:l.truck_no_as_per_bill,commercial_invoice_no:l.commercial_invoice_no||"",eway_bill_no:l.eway_bill_no||"",bilty_no:l.bilty_no||"",has_certificate_of_analysis:l.has_certificate_of_analysis,has_certificate_of_quantity:l.has_certificate_of_quantity,remarks:l.remarks||""}},i=!0)}catch{}}i?w(a):a.length>0&&B(!0)})()},[y.length,A]);const m=(e,a,i)=>{w(s=>s.map(d=>{if(d.id!==e)return d;const l={...d,formData:{...d.formData,[a]:i}};if(a==="has_certificate_of_analysis"&&i===!1){l.certificateOfAnalysisFile=null;const F=C.current[e];F&&(F.value="")}if(a==="has_certificate_of_quantity"&&i===!1){l.certificateOfQuantityFile=null;const F=$.current[e];F&&(F.value="")}return l})),n[`${e}_${a}`]&&b(s=>{const d={...s};return delete d[`${e}_${a}`],d})},C=x.useRef({}),$=x.useRef({}),q=(e,a,i)=>{w(d=>d.map(l=>l.id===e?{...l,[a]:i}:l));const s=`${e}_${a}`;n[s]&&b(d=>{const l={...d};return delete l[s],l})},K=()=>{re(!0),B(!1),b({})},le=()=>{c(v&&u?`/gate/raw-materials/edit/${u}/step3`:`/gate/raw-materials/new/step3?entryId=${u}`)},ne=e=>{const a={};e.formData.particulars.trim()||(a[`${e.id}_particulars`]="Particulars is required"),e.formData.arrival_datetime||(a[`${e.id}_arrival_datetime`]="Arrival date/time is required"),e.formData.party_name.trim()||(a[`${e.id}_party_name`]="Party name is required"),(!e.formData.billing_qty||parseFloat(e.formData.billing_qty)<=0)&&(a[`${e.id}_billing_qty`]="Billing quantity is required"),e.formData.billing_uom.trim()||(a[`${e.id}_billing_uom`]="Billing UOM is required"),e.formData.truck_no_as_per_bill.trim()?me.vehicleNumber.test(e.formData.truck_no_as_per_bill.trim().toUpperCase())||(a[`${e.id}_truck_no_as_per_bill`]="Please enter a valid vehicle number (e.g., MH12AB1234)"):a[`${e.id}_truck_no_as_per_bill`]="Truck number is required";const i=e.existingSlip?.attachments?.some(d=>d.attachment_type==="certificate_of_analysis");e.formData.has_certificate_of_analysis&&!e.certificateOfAnalysisFile&&!i&&(a[`${e.id}_certificateOfAnalysisFile`]="Please upload Certificate of Analysis file");const s=e.existingSlip?.attachments?.some(d=>d.attachment_type==="certificate_of_quantity");return e.formData.has_certificate_of_quantity&&!e.certificateOfQuantityFile&&!s&&(a[`${e.id}_certificateOfQuantityFile`]="Please upload Certificate of Quantity file"),a},ce=async()=>{if(!u){b({general:"Entry ID is missing. Please go back to step 1."});return}if(A&&y.every(a=>a.isSubmitted)){c(`/gate/raw-materials/edit/${u}/step5`);return}let e={};for(const a of y)if(!a.isSubmitted){const i=ne(a);e={...e,...i}}if(Object.keys(e).length>0){b(e);return}b({});try{for(const a of y)if(!a.isSubmitted){const i={particulars:a.formData.particulars,arrival_datetime:new Date(a.formData.arrival_datetime).toISOString(),weighing_required:!0,party_name:a.formData.party_name,billing_qty:parseFloat(a.formData.billing_qty),billing_uom:a.formData.billing_uom,truck_no_as_per_bill:a.formData.truck_no_as_per_bill,commercial_invoice_no:a.formData.commercial_invoice_no,eway_bill_no:a.formData.eway_bill_no,bilty_no:a.formData.bilty_no,has_certificate_of_analysis:a.formData.has_certificate_of_analysis,has_certificate_of_quantity:a.formData.has_certificate_of_quantity,remarks:a.formData.remarks},s=await V.mutateAsync({poItemReceiptId:a.id,data:i});await M.mutateAsync({slipId:s.id,certificateOfAnalysis:a.certificateOfAnalysisFile||void 0,certificateOfQuantity:a.certificateOfQuantityFile||void 0})}se(!0),c(v?`/gate/raw-materials/edit/${u}/step5`:`/gate/raw-materials/new/step5?entryId=${u}`)}catch(a){const i=a;if(i.errors){const s={};Object.entries(i.errors).forEach(([d,l])=>{Array.isArray(l)&&l.length>0&&(s[d]=l[0])}),b(s)}else b({general:i.message||"Failed to save arrival slips"})}},R=ye(S),de=he(S),Y=A&&!T&&(O.length===0||R);if(T||ie)return t.jsx(je,{});const _=V.isPending||M.isPending,r=U&&!D;return t.jsxs("div",{className:"space-y-6 pb-6",children:[t.jsx(Ne,{currentStep:Q,error:de?xe():n.general||(S&&!R?X(S,"Failed to load PO receipts"):null)}),Y&&!D&&t.jsx(Z,{message:R?X(S,"PO receipts not found"):"No PO receipts found. Please go back to Step 3 to add PO receipts.",onFillData:K}),U&&!D&&t.jsx(Z,{message:"Arrival slip not found",onFillData:K}),y.length>0&&y.every(e=>e.isSubmitted)&&t.jsxs("div",{className:"rounded-md bg-green-50 p-4 text-sm text-green-800 flex items-center gap-2",children:[t.jsx(H,{className:"h-5 w-5"}),"All arrival slips have been submitted to QA. Click Next to proceed to Weighment."]}),t.jsxs("div",{className:"space-y-6",children:[y.map((e,a)=>t.jsxs(z,{className:e.isSubmitted||r?"opacity-75":"",children:[t.jsxs(ue,{children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(_e,{className:"flex items-center gap-2",children:[t.jsx(Ce,{className:"h-5 w-5"}),t.jsxs("span",{children:["Arrival Slip ",a+1,": ",e.item_name]})]}),e.isSubmitted&&t.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:[t.jsx(H,{className:"h-3 w-3"}),"Submitted"]})]}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["PO: ",e.po_number," | Item Code: ",e.po_item_code," | Received Qty:"," ",e.received_qty," ",e.uom]})]}),t.jsx(W,{children:t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs(p,{htmlFor:`particulars-${e.id}`,children:["Particulars ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(h,{id:`particulars-${e.id}`,placeholder:"Material description",value:e.formData.particulars,onChange:i=>m(e.id,"particulars",i.target.value),disabled:e.isSubmitted||_||r,className:g(n[`${e.id}_particulars`]&&"border-destructive",(e.isSubmitted||r)&&"cursor-not-allowed opacity-50")}),n[`${e.id}_particulars`]&&t.jsx("p",{className:"text-sm text-destructive",children:n[`${e.id}_particulars`]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(p,{htmlFor:`arrival_datetime-${e.id}`,children:["Arrival Date/Time ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(h,{id:`arrival_datetime-${e.id}`,type:"datetime-local",value:e.formData.arrival_datetime,onChange:i=>m(e.id,"arrival_datetime",i.target.value),disabled:e.isSubmitted||_||r,className:g(n[`${e.id}_arrival_datetime`]&&"border-destructive",(e.isSubmitted||r)&&"cursor-not-allowed opacity-50")}),n[`${e.id}_arrival_datetime`]&&t.jsx("p",{className:"text-sm text-destructive",children:n[`${e.id}_arrival_datetime`]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(p,{htmlFor:`party_name-${e.id}`,children:["Party Name ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(h,{id:`party_name-${e.id}`,placeholder:"Supplier name",value:e.formData.party_name,onChange:i=>m(e.id,"party_name",i.target.value),disabled:e.isSubmitted||_||r,className:g(n[`${e.id}_party_name`]&&"border-destructive",(e.isSubmitted||r)&&"cursor-not-allowed opacity-50")}),n[`${e.id}_party_name`]&&t.jsx("p",{className:"text-sm text-destructive",children:n[`${e.id}_party_name`]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(p,{htmlFor:`billing_qty-${e.id}`,children:["Billing Quantity ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(h,{id:`billing_qty-${e.id}`,type:"number",step:"0.001",min:"0",placeholder:"0",value:e.formData.billing_qty,onChange:i=>m(e.id,"billing_qty",i.target.value),disabled:e.isSubmitted||_||r,className:g(n[`${e.id}_billing_qty`]&&"border-destructive",(e.isSubmitted||r)&&"cursor-not-allowed opacity-50")}),n[`${e.id}_billing_qty`]&&t.jsx("p",{className:"text-sm text-destructive",children:n[`${e.id}_billing_qty`]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(p,{htmlFor:`billing_uom-${e.id}`,children:["Billing UOM ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(h,{id:`billing_uom-${e.id}`,placeholder:"Pcs, Kg, etc.",value:e.formData.billing_uom,onChange:i=>m(e.id,"billing_uom",i.target.value),disabled:e.isSubmitted||_||r,className:g(n[`${e.id}_billing_uom`]&&"border-destructive",(e.isSubmitted||r)&&"cursor-not-allowed opacity-50")}),n[`${e.id}_billing_uom`]&&t.jsx("p",{className:"text-sm text-destructive",children:n[`${e.id}_billing_uom`]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(p,{htmlFor:`truck_no_as_per_bill-${e.id}`,children:["Truck No. (as per Bill) ",t.jsx("span",{className:"text-destructive",children:"*"})]}),t.jsx(h,{id:`truck_no_as_per_bill-${e.id}`,placeholder:"MH12AB1234",value:e.formData.truck_no_as_per_bill,onChange:i=>{const s=i.target.value.toUpperCase().replace(/\s/g,"");m(e.id,"truck_no_as_per_bill",s)},disabled:e.isSubmitted||_||r,className:g(n[`${e.id}_truck_no_as_per_bill`]&&"border-destructive",(e.isSubmitted||r)&&"cursor-not-allowed opacity-50")}),n[`${e.id}_truck_no_as_per_bill`]&&t.jsx("p",{className:"text-sm text-destructive",children:n[`${e.id}_truck_no_as_per_bill`]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(p,{htmlFor:`commercial_invoice_no-${e.id}`,children:"Commercial Invoice No."}),t.jsx(h,{id:`commercial_invoice_no-${e.id}`,placeholder:"Invoice number",value:e.formData.commercial_invoice_no,onChange:i=>m(e.id,"commercial_invoice_no",i.target.value),disabled:e.isSubmitted||_||r,className:e.isSubmitted||r?"cursor-not-allowed opacity-50":""})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(p,{htmlFor:`eway_bill_no-${e.id}`,children:"E-way Bill No."}),t.jsx(h,{id:`eway_bill_no-${e.id}`,placeholder:"E-way bill number",value:e.formData.eway_bill_no,onChange:i=>m(e.id,"eway_bill_no",i.target.value),disabled:e.isSubmitted||_||r,className:e.isSubmitted||r?"cursor-not-allowed opacity-50":""})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(p,{htmlFor:`bilty_no-${e.id}`,children:"Bilty No."}),t.jsx(h,{id:`bilty_no-${e.id}`,placeholder:"Bilty/LR number",value:e.formData.bilty_no,onChange:i=>m(e.id,"bilty_no",i.target.value),disabled:e.isSubmitted||_||r,className:e.isSubmitted||r?"cursor-not-allowed opacity-50":""})]}),t.jsxs("div",{className:"space-y-2 md:col-span-2 lg:col-span-3",children:[t.jsx(p,{htmlFor:`remarks-${e.id}`,children:"Remarks"}),t.jsx(h,{id:`remarks-${e.id}`,placeholder:"Any additional remarks",value:e.formData.remarks,onChange:i=>m(e.id,"remarks",i.target.value),disabled:e.isSubmitted||_||r,className:e.isSubmitted||r?"cursor-not-allowed opacity-50":""})]}),t.jsxs("div",{className:"space-y-4 md:col-span-2 lg:col-span-3",children:[t.jsx(p,{children:"Certificates"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(G,{id:`has_certificate_of_analysis-${e.id}`,checked:e.formData.has_certificate_of_analysis,onCheckedChange:i=>m(e.id,"has_certificate_of_analysis",i===!0),disabled:e.isSubmitted||_||r}),t.jsx(p,{htmlFor:`has_certificate_of_analysis-${e.id}`,className:"text-sm font-normal cursor-pointer",children:"Certificate of Analysis (COA)"})]}),e.formData.has_certificate_of_analysis&&t.jsxs("div",{className:"ml-6",children:[e.certificateOfAnalysisFile?t.jsxs("div",{className:"flex items-center gap-2 rounded-md border bg-muted/50 px-3 py-2 text-sm",children:[t.jsx(I,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),t.jsx("span",{className:"truncate",children:e.certificateOfAnalysisFile.name}),!e.isSubmitted&&!r&&t.jsx(k,{type:"button",variant:"ghost",size:"sm",className:"ml-auto h-6 w-6 p-0",onClick:()=>{q(e.id,"certificateOfAnalysisFile",null);const i=C.current[e.id];i&&(i.value="")},children:t.jsx(J,{className:"h-3.5 w-3.5"})})]}):e.existingSlip?.attachments?.find(i=>i.attachment_type==="certificate_of_analysis")?t.jsxs("div",{className:"flex items-center gap-2 rounded-md border bg-muted/50 px-3 py-2 text-sm",children:[t.jsx(I,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),t.jsx("span",{className:"truncate",children:e.existingSlip.attachments.find(i=>i.attachment_type==="certificate_of_analysis")?.file_name||"COA uploaded"}),!e.isSubmitted&&!r&&t.jsx(k,{type:"button",variant:"outline",size:"sm",className:"ml-auto h-7 text-xs",onClick:()=>C.current[e.id]?.click(),children:"Replace"})]}):t.jsxs("div",{className:g("flex items-center gap-3 rounded-md border-2 border-dashed px-3 py-3 cursor-pointer transition-colors",n[`${e.id}_certificateOfAnalysisFile`]?"border-destructive/50 hover:border-destructive":"border-muted-foreground/25 hover:border-primary/50",(e.isSubmitted||r)&&"cursor-not-allowed opacity-50"),onClick:()=>{!e.isSubmitted&&!r&&C.current[e.id]?.click()},children:[t.jsx(ee,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"Click to upload COA file"})]}),t.jsx("input",{ref:i=>{C.current[e.id]=i},type:"file",className:"hidden",onChange:i=>{const s=i.target.files?.[0]||null;q(e.id,"certificateOfAnalysisFile",s)},disabled:e.isSubmitted||_||r}),n[`${e.id}_certificateOfAnalysisFile`]&&t.jsx("p",{className:"text-sm text-destructive",children:n[`${e.id}_certificateOfAnalysisFile`]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(G,{id:`has_certificate_of_quantity-${e.id}`,checked:e.formData.has_certificate_of_quantity,onCheckedChange:i=>m(e.id,"has_certificate_of_quantity",i===!0),disabled:e.isSubmitted||_||r}),t.jsx(p,{htmlFor:`has_certificate_of_quantity-${e.id}`,className:"text-sm font-normal cursor-pointer",children:"Certificate of Quantity (COQ)"})]}),e.formData.has_certificate_of_quantity&&t.jsxs("div",{className:"ml-6",children:[e.certificateOfQuantityFile?t.jsxs("div",{className:"flex items-center gap-2 rounded-md border bg-muted/50 px-3 py-2 text-sm",children:[t.jsx(I,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),t.jsx("span",{className:"truncate",children:e.certificateOfQuantityFile.name}),!e.isSubmitted&&!r&&t.jsx(k,{type:"button",variant:"ghost",size:"sm",className:"ml-auto h-6 w-6 p-0",onClick:()=>{q(e.id,"certificateOfQuantityFile",null);const i=$.current[e.id];i&&(i.value="")},children:t.jsx(J,{className:"h-3.5 w-3.5"})})]}):e.existingSlip?.attachments?.find(i=>i.attachment_type==="certificate_of_quantity")?t.jsxs("div",{className:"flex items-center gap-2 rounded-md border bg-muted/50 px-3 py-2 text-sm",children:[t.jsx(I,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),t.jsx("span",{className:"truncate",children:e.existingSlip.attachments.find(i=>i.attachment_type==="certificate_of_quantity")?.file_name||"COQ uploaded"}),!e.isSubmitted&&!r&&t.jsx(k,{type:"button",variant:"outline",size:"sm",className:"ml-auto h-7 text-xs",onClick:()=>$.current[e.id]?.click(),children:"Replace"})]}):t.jsxs("div",{className:g("flex items-center gap-3 rounded-md border-2 border-dashed px-3 py-3 cursor-pointer transition-colors",n[`${e.id}_certificateOfQuantityFile`]?"border-destructive/50 hover:border-destructive":"border-muted-foreground/25 hover:border-primary/50",(e.isSubmitted||r)&&"cursor-not-allowed opacity-50"),onClick:()=>{!e.isSubmitted&&!r&&$.current[e.id]?.click()},children:[t.jsx(ee,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-sm text-muted-foreground",children:"Click to upload COQ file"})]}),t.jsx("input",{ref:i=>{$.current[e.id]=i},type:"file",className:"hidden",onChange:i=>{const s=i.target.files?.[0]||null;q(e.id,"certificateOfQuantityFile",s)},disabled:e.isSubmitted||_||r}),n[`${e.id}_certificateOfQuantityFile`]&&t.jsx("p",{className:"text-sm text-destructive",children:n[`${e.id}_certificateOfQuantityFile`]})]})]})]})]})]})})]},e.id)),y.length===0&&!Y&&t.jsx(z,{children:t.jsx(W,{className:"py-8",children:t.jsxs("div",{className:"text-center text-muted-foreground",children:[t.jsx($e,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"No PO item receipts found to create arrival slips."}),t.jsx("p",{className:"text-sm mt-2",children:"Please go back to Step 3 to add PO receipts first."})]})})})]}),t.jsx(fe,{onPrevious:le,onCancel:()=>{o.invalidateQueries({queryKey:["vehicleEntries"]}),c("/gate/raw-materials")},onNext:ce,showUpdate:!1,isSaving:_||ae,isEditMode:A,isUpdateMode:!1,nextLabel:y.every(e=>e.isSubmitted)?"Next":"Submit to QA and Continue"})]})}export{tt as default};
